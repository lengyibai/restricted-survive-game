var X=Object.defineProperty;var J=(t,i,e)=>i in t?X(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var h=(t,i,e)=>J(t,typeof i!="symbol"?i+"":i,e);import{d as Q,r as Y,o as Z,c as tt,a as it,b as et}from"./game_vue-DNU60DdV.js";import{g as y}from"./game_js_plgins-DjKJqAo0.js";import{j as x,k as rt,l as nt,b as F,G as B,C as j,m as st,n as w}from"./game_pixi-BtvCmBUP.js";import"./game_pixi_plgins-AHsSp4A9.js";import"./game_spine-BbcFyLid.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();function ot(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var M=ot,at=typeof x=="object"&&x&&x.Object===Object&&x,ht=at,dt=ht,lt=typeof self=="object"&&self&&self.Object===Object&&self,ut=dt||lt||Function("return this")(),R=ut,ct=R,ft=function(){return ct.Date.now()},gt=ft,yt=/\s/;function pt(t){for(var i=t.length;i--&&yt.test(t.charAt(i)););return i}var wt=pt,St=wt,bt=/^\s+/;function mt(t){return t&&t.slice(0,St(t)+1).replace(bt,"")}var vt=mt,Pt=R,Tt=Pt.Symbol,G=Tt,$=G,K=Object.prototype,xt=K.hasOwnProperty,Ct=K.toString,v=$?$.toStringTag:void 0;function zt(t){var i=xt.call(t,v),e=t[v];try{t[v]=void 0;var r=!0}catch{}var n=Ct.call(t);return r&&(i?t[v]=e:delete t[v]),n}var Bt=zt,jt=Object.prototype,Ot=jt.toString;function _t(t){return Ot.call(t)}var It=_t,L=G,$t=Bt,Lt=It,kt="[object Null]",At="[object Undefined]",k=L?L.toStringTag:void 0;function Et(t){return t==null?t===void 0?At:kt:k&&k in Object(t)?$t(t):Lt(t)}var Wt=Et;function Ft(t){return t!=null&&typeof t=="object"}var Mt=Ft,Rt=Wt,Gt=Mt,Kt="[object Symbol]";function Nt(t){return typeof t=="symbol"||Gt(t)&&Rt(t)==Kt}var Dt=Nt,Vt=vt,A=M,Ht=Dt,E=NaN,qt=/^[-+]0x[0-9a-f]+$/i,Ut=/^0b[01]+$/i,Xt=/^0o[0-7]+$/i,Jt=parseInt;function Qt(t){if(typeof t=="number")return t;if(Ht(t))return E;if(A(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=A(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Vt(t);var e=Ut.test(t);return e||Xt.test(t)?Jt(t.slice(2),e?2:8):qt.test(t)?E:+t}var Yt=Qt,Zt=M,z=gt,W=Yt,ti="Expected a function",ii=Math.max,ei=Math.min;function ri(t,i,e){var r,n,o,u,l,s,a=0,p=!1,f=!1,S=!0;if(typeof t!="function")throw new TypeError(ti);i=W(i)||0,Zt(e)&&(p=!!e.leading,f="maxWait"in e,o=f?ii(W(e.maxWait)||0,i):o,S="trailing"in e?!!e.trailing:S);function b(d){var c=r,m=n;return r=n=void 0,a=d,u=t.apply(m,c),u}function g(d){return a=d,l=setTimeout(T,i),p?b(d):u}function H(d){var c=d-s,m=d-a,I=i-c;return f?ei(I,o-m):I}function O(d){var c=d-s,m=d-a;return s===void 0||c>=i||c<0||f&&m>=o}function T(){var d=z();if(O(d))return _(d);l=setTimeout(T,H(d))}function _(d){return l=void 0,S&&r?b(d):(r=n=void 0,u)}function q(){l!==void 0&&clearTimeout(l),a=0,r=s=n=l=void 0}function U(){return l===void 0?u:_(z())}function C(){var d=z(),c=O(d);if(r=arguments,n=this,s=d,c){if(l===void 0)return g(s);if(f)return clearTimeout(l),l=setTimeout(T,i),b(s)}return l===void 0&&(l=setTimeout(T,i)),u}return C.cancel=q,C.flush=U,C}var ni=ri;const N=rt(ni),P=new nt({resizeTo:window,antialias:!1,resolution:window.devicePixelRatio||1,autoDensity:!0});class si{constructor(){h(this,"currentScreen");const i=N(()=>{this.updateViewSize()});window.addEventListener("resize",i)}updateViewSize(){if(!this.currentScreen)return;const i=window.innerWidth,e=window.innerHeight;this.currentScreen.resize(i,e)}async showScreen(i){this.currentScreen&&await this.hideAndRemoveScreen(this.currentScreen),this.addAndShowScreen(i),this.updateViewSize()}async hideAndRemoveScreen(i){return new Promise(e=>{y.to(i,{duration:.5,alpha:0,onComplete(){i.eventMode="none",i.visible=!1,i.destroy({children:!0}),e()}})})}addAndShowScreen(i){this.currentScreen=new i,P.stage.addChild(this.currentScreen),this.currentScreen.alpha=0,y.to(this.currentScreen,{duration:.5,alpha:1})}}const D=new si;class V extends F{constructor(i,e){super(),this.width=i,this.height=e}}class oi extends B{constructor(e){super();h(this,"radius",0);h(this,"enableTint",!0);h(this,"bgColor","#fff");h(this,"borderWidth",0);h(this,"borderColor","black");h(this,"bgAlpha",1);const{x:r=0,y:n=0,width:o=0,height:u=0,bgColor:l="#fff",alpha:s=1,radius:a=0,borderWidth:p=0,borderColor:f="black",enableTint:S=!0,overflowHide:b=!1}=e;if(this.x=r,this.y=n,this.bgAlpha=s,this.radius=a,this.enableTint=S,this.bgColor=l,this.borderWidth=p,this.borderColor=f,this.renderBg(o,u),b){const g=new B;g.beginFill(16777215),g.drawRect(0,0,o,u),g.endFill(),this.addChild(g),this.mask=g}}updateColor(e){y.to(this,{tint:e,duration:.25})}renderBg(e,r){this.clear(),this.enableTint?(this.beginFill("#fff",this.bgAlpha),this.tint=this.bgColor):(this.beginFill(this.bgColor,this.bgAlpha),this.borderWidth&&this.lineStyle(this.borderWidth,this.borderColor,1)),this.borderWidth&&this.lineStyle(this.borderWidth,this.borderColor,1),this.radius!==0?typeof this.radius=="number"?this.drawRoundedRect(0,0,e,r,this.radius):(this.moveTo(0+this.radius[0],0),this.lineTo(0+e-this.radius[1],0),this.radius[1]>0?this.arcTo(0+e,0,0+e,0+this.radius[1],this.radius[1]):this.lineTo(0+e,0),this.lineTo(0+e,0+r-this.radius[2]),this.radius[2]>0?this.arcTo(0+e,0+r,0+e-this.radius[2],0+r,this.radius[2]):this.lineTo(0+e,0+r),this.lineTo(0+this.radius[3],0+r),this.radius[3]>0?this.arcTo(0,0+r,0,0+r-this.radius[3],this.radius[3]):this.lineTo(0,0+r),this.lineTo(0,0+this.radius[0]),this.radius[0]>0?this.arcTo(0,0,0+this.radius[0],0,this.radius[0]):this.lineTo(0,0),this.closePath()):this.drawRect(0,0,e,r),this.endFill()}showBorder(e){this.borderWidth=e?2:0,this.renderBg(this.width,this.height)}}class ai extends j{constructor(e,r,n){super();h(this,"fill");h(this,"bgColorFill");n?(this.bgColorFill=new oi({width:e,height:r,bgColor:n}),this.addChild(this.bgColorFill)):(this.fill=new V(e,r),this.addChild(this.fill))}setSize(e,r){this.fill&&(this.fill.width=e,this.fill.height=r),this.bgColorFill&&this.bgColorFill.renderBg(e,r)}}const hi=t=>{const i=new B;return i.beginFill(16777215),i.drawRect(0,0,t.width,t.height),i.endFill(),t.addChild(i),t.mask=i,i};class di{constructor(){h(this,"verticalScreenInfo",{width:0,height:0,scale:1});h(this,"horizontalScreenInfo",{width:0,height:0,scale:1});h(this,"updateViewSize",()=>{const i=P.screen.width,e=P.screen.height,r=i<e;this.horizontalScreenInfo.width=i,this.horizontalScreenInfo.height=e,this.horizontalScreenInfo.scale=Math.min(i/1920,e/1080),this.verticalScreenInfo.width=i,this.verticalScreenInfo.height=e,this.verticalScreenInfo.scale=r?i/1080:e/1080});this.updateViewSize(),window.addEventListener("resize",N(this.updateViewSize,250))}}new di;class li extends F{constructor(i){const{texture:e,width:r,height:n,anchor:o=0}=i;super(e),r&&(this.width=r),n&&(this.height=n),this.anchor.set(o)}}class ui extends j{constructor(){super();h(this,"windowSize",{width:window.innerWidth,height:window.innerHeight});h(this,"ground");h(this,"player");h(this,"playerCenterStatus",{xCenter:!0,yCenter:!0});h(this,"groundBoundaryStatus",{left:!1,right:!1,top:!1,bottom:!1});h(this,"groundPosition",{x:0,y:0});h(this,"playerPosition",{x:0,y:0});const e=new V(this.windowSize.width,this.windowSize.height);this.addChild(e),hi(this),this.ground=new ai(5e3,5e3,"#000"),this.addChild(this.ground),this.ground.x=-5e3/2+this.windowSize.width/2,this.ground.y=-5e3/2+this.windowSize.height/2;const r=new st(w.get("grass"),5e3,5e3);this.ground.addChild(r),r.tileScale.x=.5,r.tileScale.y=.5,this.player=new li({texture:w.get("player")}),this.addChild(this.player),this.player.scale.set(.1),this.player.x=this.windowSize.width/2-this.player.width/2,this.player.y=this.windowSize.height/2-this.player.width/2,this.setKeyDownEvent()}setKeyDownEvent(){const e={};this.groundPosition.x=this.ground.x,this.groundPosition.y=this.ground.y;const r=(s,a)=>{y.killTweensOf(this.ground),!this.groundBoundaryStatus.left&&!this.groundBoundaryStatus.right&&(this.groundPosition.x+=s),!this.groundBoundaryStatus.top&&!this.groundBoundaryStatus.bottom&&(this.groundPosition.y+=a),this.groundPosition.x>=0&&s>0&&(this.groundPosition.x=0),this.groundBoundaryStatus.left=this.groundPosition.x===0,this.groundPosition.x<=-5e3+this.windowSize.width&&s<0&&(this.groundPosition.x=-5e3+this.windowSize.width),this.groundBoundaryStatus.right=this.groundPosition.x===-5e3+this.windowSize.width,this.groundPosition.y>=0&&a>0&&(this.groundPosition.y=0),this.groundBoundaryStatus.top=this.groundPosition.y===0,this.groundPosition.y<=-5e3+this.windowSize.height&&a<0&&(this.groundPosition.y=-5e3+this.windowSize.height,this.groundBoundaryStatus.bottom=!0),this.groundBoundaryStatus.bottom=this.groundPosition.y===-5e3+this.windowSize.height,y.to(this.ground,{x:this.groundPosition.x,y:this.groundPosition.y,duration:.5,ease:"power2.out"}),n(-s,-a)};this.playerPosition.x=this.player.x,this.playerPosition.y=this.player.y;const n=(s,a)=>{y.killTweensOf(this.player),(this.groundBoundaryStatus.left||this.groundBoundaryStatus.right)&&(this.playerPosition.x+=s),(this.groundBoundaryStatus.top||this.groundBoundaryStatus.bottom)&&(this.playerPosition.y+=a),this.playerPosition.x<=0&&s<0&&(this.playerPosition.x=0),this.playerPosition.x>=this.windowSize.width-this.player.width&&s>0&&(this.playerPosition.x=this.windowSize.width-this.player.width),this.playerPosition.y<=0&&a<0&&(this.playerPosition.y=0),this.playerPosition.y>=this.windowSize.height-this.player.height&&a>0&&(this.playerPosition.y=this.windowSize.height-this.player.height),(this.groundBoundaryStatus.left&&this.playerPosition.x>=(this.windowSize.width-this.player.width)/2||this.groundBoundaryStatus.right&&this.playerPosition.x<=(this.windowSize.width-this.player.width)/2)&&(this.playerPosition.x=(this.windowSize.width-this.player.width)/2,this.playerCenterStatus.xCenter=!0,this.groundBoundaryStatus.left=!1,this.groundBoundaryStatus.right=!1),(this.groundBoundaryStatus.top&&this.playerPosition.y>=(this.windowSize.height-this.player.height)/2||this.groundBoundaryStatus.bottom&&this.playerPosition.y<=(this.windowSize.height-this.player.height)/2)&&(this.playerPosition.y=(this.windowSize.height-this.player.height)/2,this.playerCenterStatus.yCenter=!0,this.groundBoundaryStatus.top=!1,this.groundBoundaryStatus.bottom=!1),y.to(this.player,{x:this.playerPosition.x,y:this.playerPosition.y,ease:"power2.out",duration:.5})},o={KeyD:[-10,0],KeyA:[10,0],KeyW:[0,10],KeyS:[0,-10]},u=()=>{const s=e.KeyA&&e.KeyD,a=e.KeyW&&e.KeyS;return s||a},l=()=>{if(!u()){for(const s in e)if(e[s]&&o[s]){const[a,p]=o[s];r(a,p)}}requestAnimationFrame(l)};window.addEventListener("keydown",s=>{e[s.code]=!0}),window.addEventListener("keyup",s=>{e[s.code]=!1}),l()}resize(e,r){}}const ci={grass:"img/grass.jpg",player:"img/player.png"},fi={},gi=async t=>{const{gameManifest:i,onProgress:e}=t;w.addBundle("gameManifest",i),await w.loadBundle("gameManifest",async r=>{e(r)})};class yi extends j{constructor(){super(),this.init()}async init(){const i=()=>{location.reload()};w.addBundle("loadingManifest",fi),await w.loadBundle("loadingManifest"),window.addEventListener("online",i),await gi({gameManifest:ci,onProgress:e=>{e===1&&D.showScreen(ui)}}),window.removeEventListener("online",i)}resize(i,e){}}const pi=Q({__name:"index",setup(t){const i=Y();return Z(async()=>{i.value&&(i.value.append(P.view),globalThis.__PIXI_APP__=P,D.showScreen(yi))}),(e,r)=>(it(),tt("div",{ref_key:"appRef",ref:i},null,512))}}),wi=et(pi);wi.mount("#app");
