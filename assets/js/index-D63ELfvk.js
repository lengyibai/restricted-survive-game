var Y=Object.defineProperty;var q=(e,t,i)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var d=(e,t,i)=>q(e,typeof t!="symbol"?t+"":t,i);import{d as J,r as Q,o as Z,c as tt,a as et,b as it}from"./game_vue-DNU60DdV.js";import{g as m}from"./game_js_plgins-DjKJqAo0.js";import{j as W,k as rt,l as st,m as nt,n as ot,C as B,b as M,o as x,G as _,q as at}from"./game_pixi-CW65XjlF.js";import"./game_pixi_plgins-ClpZMDXe.js";import"./game_spine-Mv7Ew54T.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function dt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var R=dt,ht=typeof W=="object"&&W&&W.Object===Object&&W,lt=ht,ut=lt,ct=typeof self=="object"&&self&&self.Object===Object&&self,ft=ut||ct||Function("return this")(),G=ft,yt=G,pt=function(){return yt.Date.now()},gt=pt,wt=/\s/;function St(e){for(var t=e.length;t--&&wt.test(e.charAt(t)););return t}var bt=St,mt=bt,vt=/^\s+/;function xt(e){return e&&e.slice(0,mt(e)+1).replace(vt,"")}var Tt=xt,Pt=G,Ct=Pt.Symbol,H=Ct,I=H,K=Object.prototype,Bt=K.hasOwnProperty,zt=K.toString,P=I?I.toStringTag:void 0;function Wt(e){var t=Bt.call(e,P),i=e[P];try{e[P]=void 0;var r=!0}catch{}var n=zt.call(e);return r&&(t?e[P]=i:delete e[P]),n}var jt=Wt,Ot=Object.prototype,_t=Ot.toString;function kt(e){return _t.call(e)}var It=kt,$=H,$t=jt,Lt=It,At="[object Null]",Ft="[object Undefined]",L=$?$.toStringTag:void 0;function Et(e){return e==null?e===void 0?Ft:At:L&&L in Object(e)?$t(e):Lt(e)}var Mt=Et;function Rt(e){return e!=null&&typeof e=="object"}var Gt=Rt,Ht=Mt,Kt=Gt,Nt="[object Symbol]";function Dt(e){return typeof e=="symbol"||Kt(e)&&Ht(e)==Nt}var Vt=Dt,Xt=Tt,A=R,Ut=Vt,F=NaN,Yt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Jt=/^0o[0-7]+$/i,Qt=parseInt;function Zt(e){if(typeof e=="number")return e;if(Ut(e))return F;if(A(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=A(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xt(e);var i=qt.test(e);return i||Jt.test(e)?Qt(e.slice(2),i?2:8):Yt.test(e)?F:+e}var te=Zt,ee=R,O=gt,E=te,ie="Expected a function",re=Math.max,se=Math.min;function ne(e,t,i){var r,n,o,l,s,a,u=0,p=!1,c=!1,g=!0;if(typeof e!="function")throw new TypeError(ie);t=E(t)||0,ee(i)&&(p=!!i.leading,c="maxWait"in i,o=c?re(E(i.maxWait)||0,t):o,g="trailing"in i?!!i.trailing:g);function w(h){var b=r,T=n;return r=n=void 0,u=h,l=e.apply(T,b),l}function f(h){return u=h,s=setTimeout(v,t),p?w(h):l}function S(h){var b=h-a,T=h-u,k=t-b;return c?se(k,o-T):k}function y(h){var b=h-a,T=h-u;return a===void 0||b>=t||b<0||c&&T>=o}function v(){var h=O();if(y(h))return z(h);s=setTimeout(v,S(h))}function z(h){return s=void 0,g&&r?w(h):(r=n=void 0,l)}function X(){s!==void 0&&clearTimeout(s),u=0,r=a=n=s=void 0}function U(){return s===void 0?l:z(O())}function j(){var h=O(),b=y(h);if(r=arguments,n=this,a=h,b){if(s===void 0)return f(a);if(c)return clearTimeout(s),s=setTimeout(v,t),w(a)}return s===void 0&&(s=setTimeout(v,t)),l}return j.cancel=X,j.flush=U,j}var oe=ne;const N=rt(oe),C=new st({resizeTo:window,antialias:!1,resolution:window.devicePixelRatio||1,autoDensity:!0});class ae{constructor(){d(this,"currentScreen");const t=N(()=>{this.updateViewSize()});window.addEventListener("resize",t)}updateViewSize(){if(!this.currentScreen)return;const t=window.innerWidth,i=window.innerHeight;this.currentScreen.resize(t,i)}async showScreen(t){this.currentScreen&&await this.hideAndRemoveScreen(this.currentScreen),this.addAndShowScreen(t),this.updateViewSize()}async hideAndRemoveScreen(t){return new Promise(i=>{m.to(t,{duration:.5,alpha:0,onComplete(){t.eventMode="none",t.visible=!1,t.destroy({children:!0}),i()}})})}addAndShowScreen(t){this.currentScreen=new t,C.stage.addChild(this.currentScreen),this.currentScreen.alpha=0,m.to(this.currentScreen,{duration:.5,alpha:1})}}const D=new ae;class de extends nt{constructor(t){const{text:i,fontSize:r=36,fontColor:n=16777215,stroke:o,strokeColor:l,strokeThickness:s,fontWeight:a="normal",anchor:u=0,wordWrap:p=!1,wordWrapWidth:c=100,lineHeight:g=1.25,align:w="left",indent:f=0,shadow:S}=t,y=new ot({fontSize:r,wordWrap:p,wordWrapWidth:c,fontWeight:a,lineHeight:g*r,breakWords:p,fill:n,align:w,fontFamily:"MicrosoftYaHei",stroke:o?l:"transparent",strokeThickness:o?s:0});S&&(y.dropShadow=!0,y.dropShadowColor=S[0],y.dropShadowAngle=S[1]*(Math.PI/180),y.dropShadowBlur=S[2],y.dropShadowDistance=S[3]),super(i,y),this.position.x=f*r,this.anchor.set(u)}setColor(t){this.style&&(this.style.fill=t)}setWordWrapWidth(t){this.style.wordWrapWidth=t}}class he extends B{constructor(){super();d(this,"text");this.text=new de({text:"X: 0, Y: 0",fontSize:50}),this.addChild(this.text)}setPlayerPosition(i,r){this.text.text=`X: ${i.toFixed(0)}, Y: ${r.toFixed(0)}`}}class le extends M{constructor(t){const{texture:i,width:r,height:n,anchor:o=0}=t;super(i),r&&(this.width=r),n&&(this.height=n),this.anchor.set(o)}}class ue extends B{constructor(){super();d(this,"player");this.player=new le({texture:x.get("player")}),this.addChild(this.player),this.player.scale.set(.1)}}class V extends M{constructor(t,i){super(),this.width=t,this.height=i}}class ce extends _{constructor(i){super();d(this,"radius",0);d(this,"enableTint",!0);d(this,"bgColor","#fff");d(this,"borderWidth",0);d(this,"borderColor","black");d(this,"bgAlpha",1);const{x:r=0,y:n=0,width:o=0,height:l=0,bgColor:s="#fff",alpha:a=1,radius:u=0,borderWidth:p=0,borderColor:c="black",enableTint:g=!0,overflowHide:w=!1}=i;if(this.x=r,this.y=n,this.bgAlpha=a,this.radius=u,this.enableTint=g,this.bgColor=s,this.borderWidth=p,this.borderColor=c,this.renderBg(o,l),w){const f=new _;f.beginFill(16777215),f.drawRect(0,0,o,l),f.endFill(),this.addChild(f),this.mask=f}}updateColor(i){m.to(this,{tint:i,duration:.25})}renderBg(i,r){this.clear(),this.enableTint?(this.beginFill("#fff",this.bgAlpha),this.tint=this.bgColor):(this.beginFill(this.bgColor,this.bgAlpha),this.borderWidth&&this.lineStyle(this.borderWidth,this.borderColor,1)),this.borderWidth&&this.lineStyle(this.borderWidth,this.borderColor,1),this.radius!==0?typeof this.radius=="number"?this.drawRoundedRect(0,0,i,r,this.radius):(this.moveTo(0+this.radius[0],0),this.lineTo(0+i-this.radius[1],0),this.radius[1]>0?this.arcTo(0+i,0,0+i,0+this.radius[1],this.radius[1]):this.lineTo(0+i,0),this.lineTo(0+i,0+r-this.radius[2]),this.radius[2]>0?this.arcTo(0+i,0+r,0+i-this.radius[2],0+r,this.radius[2]):this.lineTo(0+i,0+r),this.lineTo(0+this.radius[3],0+r),this.radius[3]>0?this.arcTo(0,0+r,0,0+r-this.radius[3],this.radius[3]):this.lineTo(0,0+r),this.lineTo(0,0+this.radius[0]),this.radius[0]>0?this.arcTo(0,0,0+this.radius[0],0,this.radius[0]):this.lineTo(0,0),this.closePath()):this.drawRect(0,0,i,r),this.endFill()}showBorder(i){this.borderWidth=i?2:0,this.renderBg(this.width,this.height)}}class fe extends B{constructor(i,r,n){super();d(this,"fill");d(this,"bgColorFill");n?(this.bgColorFill=new ce({width:i,height:r,bgColor:n}),this.addChild(this.bgColorFill)):(this.fill=new V(i,r),this.addChild(this.fill))}setSize(i,r){this.fill&&(this.fill.width=i,this.fill.height=r),this.bgColorFill&&this.bgColorFill.renderBg(i,r)}}const ye=e=>{const t=new _;return t.beginFill(16777215),t.drawRect(0,0,e.width,e.height),t.endFill(),e.addChild(t),e.mask=t,t};class pe{constructor(){d(this,"verticalScreenInfo",{width:0,height:0,scale:1});d(this,"horizontalScreenInfo",{width:0,height:0,scale:1});d(this,"updateViewSize",()=>{const t=C.screen.width,i=C.screen.height,r=t<i;this.horizontalScreenInfo.width=t,this.horizontalScreenInfo.height=i,this.horizontalScreenInfo.scale=Math.min(t/1920,i/1080),this.verticalScreenInfo.width=t,this.verticalScreenInfo.height=i,this.verticalScreenInfo.scale=r?t/1080:i/1080});this.updateViewSize(),window.addEventListener("resize",N(this.updateViewSize,250))}}new pe;class ge extends B{constructor(){super();d(this,"windowSize",{width:window.innerWidth,height:window.innerHeight});d(this,"ground");d(this,"player");d(this,"positionText");d(this,"playerCenterStatus",{xCenter:!1,yCenter:!1});d(this,"groundBoundaryStatus",{left:!1,right:!1,top:!1,bottom:!1});d(this,"playerBoundaryStatus",{left:!1,right:!1,top:!1,bottom:!1});d(this,"groundPosition",{x:0,y:0});d(this,"playerPosition",{x:0,y:0});const i=new V(this.windowSize.width,this.windowSize.height);this.addChild(i),ye(this),this.ground=new fe(3e3,3e3,"#000"),this.addChild(this.ground),this.ground.x=-3e3/2+this.windowSize.width/2,this.ground.y=-3e3/2+this.windowSize.height/2;const r=new at(x.get("grass"),3e3,3e3);this.ground.addChild(r),r.tileScale.x=.5,r.tileScale.y=.5,this.player=new ue,this.ground.addChild(this.player),this.player.x=-this.ground.x+this.windowSize.width/2-25,this.player.y=-this.ground.y+this.windowSize.height/2-25,this.positionText=new he,this.addChild(this.positionText),this.setKeyDownEvent()}setKeyDownEvent(){const i={};this.groundPosition.x=this.ground.x,this.groundPosition.y=this.ground.y,this.playerPosition.x=this.player.x,this.playerPosition.y=this.player.y;const r=(s,a)=>{m.killTweensOf(this.ground),m.killTweensOf(this.player),this.playerBoundaryStatus.left&&s<0&&(this.playerBoundaryStatus.left=!1),this.playerBoundaryStatus.right&&s>0&&(this.playerBoundaryStatus.right=!1),this.playerBoundaryStatus.top&&a<0&&(this.playerBoundaryStatus.top=!1),this.playerBoundaryStatus.bottom&&a>0&&(this.playerBoundaryStatus.bottom=!1),this.playerBoundaryStatus.left||this.playerBoundaryStatus.right||(this.playerPosition.x-=s),this.playerBoundaryStatus.top||this.playerBoundaryStatus.bottom||(this.playerPosition.y-=a),this.playerPosition.x<=0&&(this.playerBoundaryStatus.left=!0,this.playerPosition.x=0),this.playerPosition.x>=3e3-this.player.width&&(this.playerBoundaryStatus.right=!0,this.playerPosition.x=3e3-this.player.width),this.playerPosition.y<=0&&(this.playerBoundaryStatus.top=!0,this.playerPosition.y=0),this.playerPosition.y>=3e3-this.player.height&&(this.playerBoundaryStatus.bottom=!0,this.playerPosition.y=3e3-this.player.height);const{x:u,y:p}=this.player.getGlobalPosition(),c=window.innerWidth/2-25,g=window.innerHeight/2-25;this.playerCenterStatus.xCenter=u>=c&&s<0||u<=c&&s>0,this.playerCenterStatus.yCenter=p>=g&&a<0||p<=g&&a>0,this.groundBoundaryStatus.left&&s<0&&(this.groundBoundaryStatus.left=!1),this.groundBoundaryStatus.right&&s>0&&(this.groundBoundaryStatus.right=!1),this.groundBoundaryStatus.top&&a<0&&(this.groundBoundaryStatus.top=!1),this.groundBoundaryStatus.bottom&&a>0&&(this.groundBoundaryStatus.bottom=!1),!this.groundBoundaryStatus.left&&!this.groundBoundaryStatus.right&&this.playerCenterStatus.xCenter&&(this.groundPosition.x+=s),!this.groundBoundaryStatus.top&&!this.groundBoundaryStatus.bottom&&this.playerCenterStatus.yCenter&&(this.groundPosition.y+=a),this.groundPosition.x>=0&&s>0&&(this.groundPosition.x=0),this.groundPosition.x<=-3e3+this.windowSize.width&&s<0&&(this.groundPosition.x=-3e3+this.windowSize.width),this.groundPosition.y>=0&&a>0&&(this.groundPosition.y=0),this.groundPosition.y<=-3e3+this.windowSize.height&&a<0&&(this.groundPosition.y=-3e3+this.windowSize.height,this.groundBoundaryStatus.bottom=!0),this.groundBoundaryStatus.left=this.groundPosition.x===0,this.groundBoundaryStatus.right=this.groundPosition.x===-3e3+this.windowSize.width,this.groundBoundaryStatus.top=this.groundPosition.y===0,this.groundBoundaryStatus.bottom=this.groundPosition.y===-3e3+this.windowSize.height,m.to(this.player,{x:this.playerPosition.x,y:this.playerPosition.y,ease:"power2.out",duration:.5}),m.to(this.ground,{x:this.groundPosition.x,y:this.groundPosition.y,duration:.5,ease:"power2.out",onUpdate:()=>{const{x:w,y:f}=this.player.getGlobalPosition(),S=-(window.innerWidth/2-w-25),y=window.innerHeight/2-f-25,v=-(this.ground.x+this.ground.width/2-window.innerWidth/2),z=this.ground.y+this.ground.height/2-window.innerHeight/2;this.positionText.setPlayerPosition(v+S,z+y)}})},n={KeyD:[-5,0],KeyA:[5,0],KeyW:[0,5],KeyS:[0,-5]},o=()=>{const s=i.KeyA&&i.KeyD,a=i.KeyW&&i.KeyS;return s||a},l=()=>{if(!o()){for(const s in i)if(i[s]&&n[s]){const[a,u]=n[s];r(a,u)}}requestAnimationFrame(l)};window.addEventListener("keydown",s=>{i[s.code]=!0}),window.addEventListener("keyup",s=>{i[s.code]=!1}),l()}resize(i,r){}}const we={grass:"img/grass.jpg",player:"img/player.png"},Se={},be=async e=>{const{gameManifest:t,onProgress:i}=e;x.addBundle("gameManifest",t),await x.loadBundle("gameManifest",async r=>{i(r)})};class me extends B{constructor(){super(),this.init()}async init(){const t=()=>{location.reload()};x.addBundle("loadingManifest",Se),await x.loadBundle("loadingManifest"),window.addEventListener("online",t),await be({gameManifest:we,onProgress:i=>{i===1&&D.showScreen(ge)}}),window.removeEventListener("online",t)}resize(t,i){}}const ve=J({__name:"index",setup(e){const t=Q();return Z(async()=>{t.value&&(t.value.append(C.view),globalThis.__PIXI_APP__=C,D.showScreen(me))}),(i,r)=>(et(),tt("div",{ref_key:"appRef",ref:t},null,512))}}),xe=it(ve);xe.mount("#app");
